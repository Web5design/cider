<!--
This work is copyright 2011 Jordon Mears. All rights reserved.

This file is part of Cider.

Cider is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Cider is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Cider.  If not, see <http://www.gnu.org/licenses/>.
-->
<!DOCTYPE html>
<html>
  <head>
    <link href="../shared.css" rel="stylesheet" type="text/css" />
    <link href="../file-manager.css" rel="stylesheet" type="text/css" />
    
    <script type="text/javascript">var path = '{{ path }}';</script>
    <script src="../javascript/prototype.js" type="text/javascript"></script>
    <script src="../javascript/file-manager.js" type="text/javascript"></script>
    <script src="../javascript/ide-enable.js" type="text/javascript"></script>
    
    <title>{{ title }}</title>
  </head>
  <body>
    <table id="fileList">
      <thead>
        <tr>
          <th colspan="3" id="title">{{ path }}</th>
        </tr>
      </thead>
      <tbody>
        {% if path != '' %}
          <tr>
            <td>&nbsp;</td>
            <td><a href="../file-manager/?path={{ up }}">..</a></td>
            <td class="buttons"><a class="button small" href="../file-manager/?path={{ up }}">..</a></td>
          </tr>
        {% end %}
        {% for file in filesList %}
          <tr>
            {% if file['isFile'] == True %}
              {% if path != '' %}
                <td class="icon">
                  <a href="../editor/?file={{ path }}/{{ file['name'] }}" onclick="return ide.openFile('{{ path }}/{{ file['name'] }}');">
                    <img src="../images/icon/file.png" />
                  </a>
                </td>
                <td>
                  <a href="../editor/?file={{ path }}/{{ file['name'] }}" onclick="return ide.openFile('{{ path }}/{{ file['name'] }}');">{{ file['name'] }}</a>
                </td>
                <td class="buttons">
                  <a class="button left small" href="../editor/?file={{ path }}/{{ file['name'] }}" onclick="return ide.openFile('{{ path }}/{{ file['name'] }}');">Edit</a><a class="button right small" href="../download/?file={{ path }}/{{ file['name'] }}">Download</a>
                </td>
              {% else %}
                <td class="icon">
                  <a href="../editor/?file={{ file['name'] }}" onclick="return ide.openFile('{{ file['name'] }}');">
                    <img src="../images/icon/file.png" />
                  </a>
                </td>
                <td>
                  <a href="../editor/?file={{ file['name'] }}" onclick="return ide.openFile('{{ file['name'] }}');">{{ file['name'] }}</a>
                </td>
                <td class="buttons">
                  <a class="button left small" href="../editor/?file={{ file['name'] }}" onclick="return ide.openFile('{{ file['name'] }}');">Edit</a><a class="button right small" href="../download/?file={{ file['name'] }}">Download</a>
                </td>
              {% end %}
            {% else %}
              {% if path != '' %}
                <td class="icon">
                  <a href="../file-manager/?path={{ path }}/{{ file['name'] }}">
                    <img src="../images/icon/folder.png" />
                  </a>
                </td>
                <td>
                  <a href="../file-manager/?path={{ path }}/{{ file['name'] }}">{{ file['name'] }}</a>
                </td>
                <td class="buttons">
                  <a class="button small" href="../file-manager/?path={{ path }}/{{ file['name'] }}">Browse</a>
                </td>
              {% else %}
                <td class="icon">
                  <a href="../file-manager/?path={{ file['name'] }}">
                    <img src="../images/icon/folder.png" />
                  </a>
                </td>
                <td>
                  <a href="../file-manager/?path={{ file['name'] }}">{{ file['name'] }}</a>
                </td>
                <td class="buttons">
                  <a class="button small" href="../file-manager/?path={{ file['name'] }}">Browse</a>
                </td>
              {% end %}
            {% end %}
          </tr>
        {% end %}
      </tbody>
      <tfoot>
        <tr>
          <td colspan="3">
            <input id="name" type="text" /><a class="button middle" href="javascript:void(0);" onclick="createFile();">New File</a><a class="button right" href="javascript:void(0);" onclick="createFolder();">New Folder</a>
          </td>
        </tr>
      </tfoot>
    </table>
  </body>
</html>